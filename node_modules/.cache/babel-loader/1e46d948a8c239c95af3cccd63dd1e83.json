{"ast":null,"code":"var _jsxFileName = \"/Users/User/fswd-twitter-clone/app/javascript/src/tweets.jsx\",\n    _this = this;\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useEffect, useState } from 'react';\nimport { getTweets, postTweet, deleteTweet } from '../packs/request';\nimport { getCurrentUser, countUsersTweets } from '../packs/utils';\nimport ReactDOM from 'react-dom';\nimport './style.scss';\n\nvar Tweets = function Tweets() {\n  //    states\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      tweets = _useState2[0],\n      setTweets = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      newTweet = _useState4[0],\n      setNewTweet = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      errorMessage = _useState6[0],\n      setErrorMessage = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      currentUser = _useState8[0],\n      setCurrentUser = _useState8[1];\n\n  var _useState9 = useState(140),\n      _useState10 = _slicedToArray(_useState9, 2),\n      characters = _useState10[0],\n      setCharacters = _useState10[1];\n\n  var _useState11 = useState(0),\n      _useState12 = _slicedToArray(_useState11, 2),\n      tweetCount = _useState12[0],\n      setTweetCount = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      imagePreview = _useState14[0],\n      setImagePreview = _useState14[1]; //    map tweets to state\n\n\n  var listOfTweets = function listOfTweets(response) {\n    setTweets(response.tweets.map(function (tweet) {\n      return tweet;\n    }));\n  }; //    handlers \n\n\n  var postTweetHandler = function postTweetHandler(event) {\n    event.preventDefault();\n    var fileUpload = document.getElementById('imageUpload');\n    var photo = fileUpload.files[0];\n    postTweet(newTweet, photo, function (response) {\n      if (response.success == false) {\n        setErrorMessage(\"Sorry, there was an error posting your tweet. Please try again\");\n      } else {\n        setErrorMessage(\"\");\n        setImagePreview(\"\");\n        getTweets(listOfTweets);\n        setNewTweet(\"\");\n        setCharacters(140);\n        countUsersTweets(response.tweet.username, setTweetCount);\n      }\n    });\n  };\n\n  var imageHandler = function imageHandler(event) {\n    var source = URL.createObjectURL(event.target.files[0]);\n    setImagePreview(source);\n  };\n\n  var tweetInputHandler = function tweetInputHandler(event) {\n    setNewTweet(event.target.value);\n    setCharacters(140 - event.target.value.length);\n  };\n\n  var deleteTweetHandler = function deleteTweetHandler(event) {\n    var id = event.target.dataset.id;\n    deleteTweet(id, function () {\n      getTweets(listOfTweets);\n      countUsersTweets(currentUser, setTweetCount);\n    });\n  }; //   get tweets on page load\n\n\n  useEffect(function () {\n    getCurrentUser(function (response) {\n      setCurrentUser(response.username);\n      countUsersTweets(response.username, setTweetCount);\n    });\n    getTweets(listOfTweets);\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mb-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"tweets\",\n    className: \"container row mt-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12 col-xl-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row justify-content-around\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-5 col-xl-12 username-box\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"p-0 py-2 py-xxl-3 ps-xxl-2 m-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"title fw-bold\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 19\n    }\n  }, currentUser), /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/\" + currentUser,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 19\n    }\n  }, \"@\", currentUser), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"px-0 mt-1 user-stats\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }, \"TWEETS\", /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/\" + currentUser,\n    className: \"d-md-flex ps-4 ps-md-0 user-stats-tweets\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 23\n    }\n  }, tweetCount)), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }, \"FOLLOWING\", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"d-md-flex\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 23\n    }\n  }, \"0\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 21\n    }\n  }, \"FOLLOWERS\", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"d-md-flex\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 23\n    }\n  }, \"0\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-5 col-xl-12 my-xl-3 explore-box\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"ps-0 p-2 ps-md-2 py-xxl-3 m-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"title fw-bold\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 19\n    }\n  }, \"#Explore\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"ps-0 ps-md-2 explore-tags\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 21\n    }\n  }, \"#WorldHealthDay\"), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }, \"#Rails\"), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, \"#MathsInFilmOrSong\"), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 21\n    }\n  }, \"#ror\"), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 21\n    }\n  }, \"#etc\")))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12 col-xl-6 twitter-feed px-md-4 my-4 my-xl-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"new-tweet-area p-3 pb-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"m-1\",\n    onSubmit: postTweetHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"form-control tweet-box\",\n    id: \"tweetInput\",\n    value: newTweet,\n    onChange: tweetInputHandler,\n    placeholder: \"What's happening?\",\n    maxLength: \"140\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-end\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"m-0 py-1 char-count\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 19\n    }\n  }, characters), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"imageUpload\",\n    className: \"form-label tweet-image-upload fw-bold px-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 19\n    }\n  }, \"Upload Photo\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control form-control-sm\",\n    type: \"file\",\n    id: \"imageUpload\",\n    accept: \"image/*\",\n    hidden: true,\n    onChange: imageHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-sm fw-bold px-3 tweet-btn\",\n    onSubmit: postTweetHandler,\n    disabled: characters == 140 || characters < 0,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 19\n    }\n  }, \"Tweet\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-end pt-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: imagePreview,\n    width: \"100\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 15\n    }\n  }, errorMessage)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tweet-list\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, tweets.map(function (tweet) {\n    if (tweet.username === currentUser) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"tweet p-3 pb-0\",\n        key: tweet.id,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"fw-bold d-inline\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 23\n        }\n      }, tweet.username), /*#__PURE__*/React.createElement(\"a\", {\n        href: '/' + tweet.username,\n        className: \"fw-light ps-1\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 23\n        }\n      }, \"@\", tweet.username), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"d-inline date ps-1\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 23\n        }\n      }, tweet.created_at), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"pt-3 fw-light\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 23\n        }\n      }, tweet.message), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"img-wrapper px-md-4\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"pb-1 tweet-image\",\n        src: tweet.image,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-sm d-flex ms-auto delete-btn\",\n        \"data-id\": tweet.id,\n        onClick: deleteTweetHandler,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 23\n        }\n      }, \"Delete\"));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"tweet pb-4 p-3\",\n        key: tweet.id,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"fw-bold d-inline\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 23\n        }\n      }, tweet.username), /*#__PURE__*/React.createElement(\"a\", {\n        href: '/' + tweet.username,\n        className: \"fw-light ps-1\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 23\n        }\n      }, \"@\", tweet.username), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"d-inline date ps-1\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 23\n        }\n      }, tweet.created_at), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"pt-3 fw-light\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 23\n        }\n      }, tweet.message), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"img-wrapper px-md-4\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"pb-1 tweet-image\",\n        src: tweet.image,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 25\n        }\n      })));\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-3 d-none d-xl-block p-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"input-group-text\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa-solid fa-magnifying-glass\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control search\",\n    type: \"search\",\n    placeholder: \"Search\",\n    \"aria-label\": \"Search\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 17\n    }\n  }))))));\n};\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  ReactDOM.render( /*#__PURE__*/React.createElement(Tweets, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 5\n    }\n  }), document.body.appendChild(document.createElement('div')));\n});","map":{"version":3,"sources":["/Users/User/fswd-twitter-clone/app/javascript/src/tweets.jsx"],"names":["React","useEffect","useState","getTweets","postTweet","deleteTweet","getCurrentUser","countUsersTweets","ReactDOM","Tweets","tweets","setTweets","newTweet","setNewTweet","errorMessage","setErrorMessage","currentUser","setCurrentUser","characters","setCharacters","tweetCount","setTweetCount","imagePreview","setImagePreview","listOfTweets","response","map","tweet","postTweetHandler","event","preventDefault","fileUpload","document","getElementById","photo","files","success","username","imageHandler","source","URL","createObjectURL","target","tweetInputHandler","value","length","deleteTweetHandler","id","dataset","created_at","message","image","addEventListener","render","body","appendChild","createElement"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { getTweets, postTweet, deleteTweet } from '../packs/request';\nimport { getCurrentUser, countUsersTweets } from '../packs/utils';\nimport ReactDOM from 'react-dom'\nimport './style.scss';\n\nconst Tweets = () => {\n  \n    //    states\n  \n    const [tweets, setTweets] = useState([]);\n    const [newTweet, setNewTweet] = useState(\"\");\n    const [errorMessage, setErrorMessage] = useState(\"\");\n    const [currentUser, setCurrentUser] = useState(\"\");\n    const [characters, setCharacters] = useState(140);\n    const [tweetCount, setTweetCount] = useState(0);\n    const [imagePreview, setImagePreview] = useState(\"\");\n  \n    //    map tweets to state\n  \n    const listOfTweets = function (response) {\n      setTweets(response.tweets.map(tweet => tweet));\n    };\n  \n    //    handlers \n  \n    const postTweetHandler = function (event) {\n      event.preventDefault();\n      var fileUpload = document.getElementById('imageUpload');\n      var photo = fileUpload.files[0];\n      postTweet(newTweet, photo, function (response) {\n        if (response.success == false) {\n          setErrorMessage(\"Sorry, there was an error posting your tweet. Please try again\");\n        }\n        else {\n          setErrorMessage(\"\");\n          setImagePreview(\"\");\n          getTweets(listOfTweets);\n          setNewTweet(\"\");\n          setCharacters(140);\n          countUsersTweets(response.tweet.username, setTweetCount);\n        }\n      });\n    };\n  \n    const imageHandler = function (event) {\n      var source = URL.createObjectURL(event.target.files[0]);\n      setImagePreview(source);\n    };\n  \n    const tweetInputHandler = function (event) {\n      setNewTweet(event.target.value);\n      setCharacters(140 - event.target.value.length);\n    };\n  \n    const deleteTweetHandler = function (event) {\n      var id = event.target.dataset.id;\n      deleteTweet(id, function () {\n        getTweets(listOfTweets);\n        countUsersTweets(currentUser, setTweetCount);\n      });\n    };\n  \n    //   get tweets on page load\n  \n    useEffect(() => {\n      getCurrentUser(function (response) {\n        setCurrentUser(response.username);\n        countUsersTweets(response.username, setTweetCount);\n      });\n      getTweets(listOfTweets);\n    }, []);\n  \n    return(\n      <div className=\"container mb-5\">\n        <div id=\"tweets\" className=\"container row mt-1\">\n  \n          <div className=\"col-12 col-xl-3\">\n  \n            <div className=\"row justify-content-around\">\n  \n              <div className=\"col-5 col-xl-12 username-box\">\n                <ul className=\"p-0 py-2 py-xxl-3 ps-xxl-2 m-0\">\n                  <li className=\"title fw-bold\">{currentUser}</li>\n                  <a href={\"/\" + currentUser}>@{currentUser}</a>\n                  <ul className=\"px-0 mt-1 user-stats\">\n                    <li>TWEETS\n                      <a href={\"/\" + currentUser} className=\"d-md-flex ps-4 ps-md-0 user-stats-tweets\">{tweetCount}</a>\n                    </li>\n                    <li>FOLLOWING \n                      <span className=\"d-md-flex\">0</span>\n                    </li>\n                    <li>FOLLOWERS \n                      <span className=\"d-md-flex\">0</span>\n                    </li>\n                  </ul>\n                </ul>\n              </div>\n  \n              <div className=\"col-5 col-xl-12 my-xl-3 explore-box\">\n                <ul className=\"ps-0 p-2 ps-md-2 py-xxl-3 m-0\">\n                  <li className=\"title fw-bold\">#Explore</li>\n                  <ul className=\"ps-0 ps-md-2 explore-tags\">\n                    <li>#WorldHealthDay</li>\n                    <li>#Rails</li>\n                    <li>#MathsInFilmOrSong</li>\n                    <li>#ror</li>\n                    <li>#etc</li>\n                  </ul>\n                </ul>\n              </div>\n  \n            </div>\n  \n          </div>\n  \n          <div className=\"col-12 col-xl-6 twitter-feed px-md-4 my-4 my-xl-0\">\n  \n            <div className=\"new-tweet-area p-3 pb-1\">\n              <form className=\"m-1\" onSubmit={postTweetHandler}>\n                <textarea \n                  className=\"form-control tweet-box\" \n                  id=\"tweetInput\" \n                  value={newTweet} \n                  onChange={tweetInputHandler}\n                  placeholder=\"What's happening?\"\n                  maxLength=\"140\">\n                </textarea>\n                <div className=\"text-end\">\n                  <p className=\"m-0 py-1 char-count\">{characters}</p>\n                  <label htmlFor=\"imageUpload\" className=\"form-label tweet-image-upload fw-bold px-2\">Upload Photo</label>\n                  <input className=\"form-control form-control-sm\" type=\"file\" id=\"imageUpload\" accept=\"image/*\" hidden onChange={imageHandler}></input>\n                  <button \n                    type=\"submit\" \n                    className=\"btn btn-sm fw-bold px-3 tweet-btn\" \n                    onSubmit={postTweetHandler}\n                    disabled={characters == 140 || characters < 0}>\n                    Tweet\n                  </button>\n                </div>\n                <div className=\"text-end pt-2\">\n                  <img src={imagePreview} width=\"100\"></img>\n                </div>\n              </form>\n              <p>\n                {errorMessage}\n              </p>\n            </div>\n  \n            <div className=\"tweet-list\">\n  \n              {tweets.map(tweet => {\n                if (tweet.username === currentUser) {\n                  return (\n                    <div className=\"tweet p-3 pb-0\" key={tweet.id}>\n                      <p className=\"fw-bold d-inline\">{tweet.username}</p>\n                      <a href={'/' + tweet.username} className=\"fw-light ps-1\">@{tweet.username}</a>\n                      <p className=\"d-inline date ps-1\">{tweet.created_at}</p>\n                      <p className=\"pt-3 fw-light\">{tweet.message}</p>\n                      <div className=\"img-wrapper px-md-4\">\n                        <img className=\"pb-1 tweet-image\" src={tweet.image}></img>\n                      </div>\n                      <button className=\"btn btn-sm d-flex ms-auto delete-btn\" data-id={tweet.id} onClick={deleteTweetHandler}>Delete</button>\n                    </div>\n                  )\n                }\n                else {\n                  return (\n                    <div className=\"tweet pb-4 p-3\" key={tweet.id}>\n                      <p className=\"fw-bold d-inline\">{tweet.username}</p>\n                      <a href={'/' + tweet.username} className=\"fw-light ps-1\">@{tweet.username}</a>\n                      <p className=\"d-inline date ps-1\">{tweet.created_at}</p>\n                      <p className=\"pt-3 fw-light\">{tweet.message}</p>\n                      <div className=\"img-wrapper px-md-4\">\n                        <img className=\"pb-1 tweet-image\" src={tweet.image}></img>\n                      </div>\n                    </div>\n                  )\n                }\n              })}\n              \n            </div>\n          </div>\n  \n          <div className=\"col-3 d-none d-xl-block p-0\">\n            <form>\n              <div className=\"input-group\">\n                <span className=\"input-group-text\">\n                  <i className=\"fa-solid fa-magnifying-glass\"></i>\n                </span>\n                <input className=\"form-control search\" type=\"search\" placeholder=\"Search\" aria-label=\"Search\"/>\n              </div>\n            </form>\n          </div>\n          </div>\n          </div>\n\n    ) \n  };\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  ReactDOM.render(\n    <Tweets />,\n    document.body.appendChild(document.createElement('div')),\n  )\n});"]},"metadata":{},"sourceType":"module"}